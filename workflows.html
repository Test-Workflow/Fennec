<dl class="listnav">
    <dt id="overview">Overview</dt>
    <dd>
        <dl class="sub_list">
            <dt id="vanilla">Vanilla</dt>
            <dd>
                <div class="code" src="wfexamplev.pl"></div>
            </dd>

            <dt id="declare">Declare</dt>
            <dd>
                <div class="code" src="wfexample.plx"></div>
            </dd>
        </dl>
    </dd>

    <dt id="state">State</dt>
    <dd>
        With Fennec you can define setup, teardown, and case methods that apply
        to tests in unique ways. These methods can be used to set variables,
        attributes, environment, or anything else.

        <script class="code">
            case NAME { ... }
        </script>

        A case is a scenario under which your tests should pass. When you
        define multiple case blocks and multiple tests, all your tests will be
        run for all your cases.

        <script class="code">
            before_each NAME { ... }
            after_each  NAME { ... }
        </script>

        before_each and after_each define code that should be run before or
        after each test block. Each test will only run once, but the
        before_each will run multiple times, once per test. after_each is the
        same but rans after each test.

        <script class="code">
            before_all NAME { ... }
            after_all  NAME { ... }
        </script>

        before_all and after_all define blocks that only ever run once.
        before_each runs once before all tests, and after_each runs once, after
        all tests.

        <script class="code">
            around_each NAME {
                # Note $self is shifted for us.
                my ( $inner ) = @_;
                local $ENV{MY_VAR} = ...;
                $inner->();
            }
        </script>

        around_each and around_all are more complicated, but they are useful
        when paired with 'local'.
    </dd>

    <dt id="grouping">Grouping</dt>
    <dd>
        Grouping is done using the 'describe' keyword. Any setup, teardown, and
        case methods defined within a describe block will ONLY apply to test
        blocks defined within that describe block. You can nest describe
        blocks, child describe blocks will inherit the setup, teardown and case
        methods from the parent describe blocks.

        <script class="code">
            describe NAME {
                case NAME_A { ... }
                case NAME_B { ... }

                before_each SETUP_A { ... }

                tests TESTS_A { ... }
                tests TESTS_B { ... }

                describe INNER {
                    before_each SETUP_B { ... }

                    tests TESTS_INNER { ... }
                }
            }

            tests OUTSIDE { ... }
        </script>

        No case or before_each applies to OUTSIDE, TESTS_A and TESTS_B get
        everything except SETUP_B, TESTS_INNER gets every setup and teardown.
    </dd>


    <dt id="posttest">Post-Testing</dt>
    <dd>
        Sometimes you want to have tests that run after all the test blocks and
        workflows complete. That is you want them to be the absolute last thing
        run. In these cases you can pass a coderef to done_testing(). This will
        ensure the codeblock is the very last thing run before Fennec cleans
        itself up. This is important because <B>You cannot have tests after
        done_testing!</b>

        <script class="code">
            use Fennec;

            ...

            done_testing( sub {
                ok( 1, "This is the last assertion!" );
            });
        </script>

        This is rarely useful, however it can be necessary when testing Fennec
        plugins to ensure you ran the desired number of tests, something Fennec
        normally prevents you from worrying about.
    </dd>

    <dt id="stages">Stages</dt>
    <dd>
        <ul id="debugger_controls">
            <li id="stage_r">&lt;&lt; reset</li>
            <li id="stage_b">&lt; step back</li>
            <li id="stage_f">step forward &gt;</li>
            <li id="stage_e">goto end &gt;&gt;</li>
        </ul>
        <table id="debugger">
            <tr>
                <td rowspan=3 id="debug_source">
                    <div class="code" src="stages.plx"></div>
                </td>
                <td id="debugger_state_wrapper">
                    <table id="debugger_state">
                        <tr>
                            <th></th>
                            <th>$init</th>
                            <th>$state</th>
                            <th>$bleed</th>
                        </tr>
                        <tr class="parent">
                            <th>Parent</th>
                            <td class="vinit"></td>
                            <td class="vstate"></td>
                            <td class="vbleed"></td>
                        </tr>

                        <tr class="child child_1">
                            <th>Child 1</th>
                            <td class="vinit"></td>
                            <td class="vstate"></td>
                            <td class="vbleed"></td>
                        </tr>

                        <tr class="child child_2">
                            <th>Child 2</th>
                            <td class="vinit"></td>
                            <td class="vstate"></td>
                            <td class="vbleed"></td>
                        </tr>
                    </table>
                </td>
            </tr>
                <td>
                    <h3>Output</h3>
                </td>
            </tr>
            </tr>
                <td id="debug_out">
                    <div class="output" src="stages.txt"></div>
                </td>
            </tr>
        </table>
        <script>
        </script>
    </dd>
</dl>
